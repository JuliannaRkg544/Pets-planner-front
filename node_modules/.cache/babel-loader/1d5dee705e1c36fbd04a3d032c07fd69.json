{"ast":null,"code":"import _slicedToArray from\"/home/juliana/Documentos/Driven/Projetos/Projeto-autoral/Pets-planner-front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import{useEffect,useState,useContext}from\"react\";import Button from\"../styledComponents/SubmmitButton\";import ToDoListStyle from\"../styledComponents/ToDoListStyle\";import Footer from\"./Footer\";import Header from\"./Header\";import UserContext from\"../Context/UserContext\";import dayjs from\"dayjs\";import\"dayjs/locale/pt-br\";import ModalTask from\"./ModalTask\";import ModalDelete from\"./ModalDelete\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function ToDoList(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),toggleModal=_useState2[0],setToggleModal=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),tasks=_useState4[0],setTasks=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),del=_useState6[0],setDel=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),idTask=_useState8[0],setIdtask=_useState8[1];var _useContext=useContext(UserContext),user=_useContext.user,setUSer=_useContext.setUSer;var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),marked=_useState10[0],setMarked=_useState10[1];var token=localStorage.getItem(\"token\");var URL_DELETE_TASK=\"\".concat(REACT_APP_API_URL,\"/pet/task/delete/\").concat(idTask);var config={headers:{Authorization:\"Bearer \".concat(token)}};console.log(\"token \",token);var URL=\"http://localhost:4000/pet/task\";useEffect(function(){axios.get(URL,config).then(function(response){console.log(response.data);setTasks(response.data);}).catch(function(e){console.log(e.response);});},[toggleModal,del,marked]);function riskTask(index,taskid){var URL_PATCH=\"http://localhost:4000/pet/task/patch/\".concat(taskid);var body={isDone:tasks[index].done};console.log(body);axios.patch(URL_PATCH,body,config).then(function(response){console.log(response.data);setMarked(!marked);}).catch(function(e){return console.log(e.response);});}if(tasks.length>0){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(ToDoListStyle,{children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\" \",dayjs().locale(\"PT-BR\").format(\"dddd, DD/MM\"),\" \"]}),tasks.map(function(task,index){return task.done?/*#__PURE__*/_jsxs(\"div\",{className:\"single-task\",children:[/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){riskTask(index,task.id);},className:\"underline\",children:task.description}),/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){setDel(!del);setIdtask(task.id);console.log(\"id do list \",task.id);},children:/*#__PURE__*/_jsx(\"ion-icon\",{name:\"trash-outline\"})}),/*#__PURE__*/_jsx(ModalDelete,{toggleModal:del,setToggleModal:setDel,id:idTask,URL:URL_DELETE_TASK})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"single-task\",children:[/*#__PURE__*/_jsxs(\"p\",{onClick:function onClick(){return riskTask(index,task.id);},children:[\" \",task.description,\" \"]}),/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){setDel(!del);setIdtask(task.id);},children:/*#__PURE__*/_jsx(\"ion-icon\",{name:\"trash-outline\"})}),/*#__PURE__*/_jsx(ModalDelete,{toggleModal:del,setToggleModal:setDel,id:idTask,URL:URL_DELETE_TASK})]});}),/*#__PURE__*/_jsx(Button,{children:/*#__PURE__*/_jsxs(\"span\",{onClick:function onClick(){setToggleModal(!toggleModal);},children:[\" \",\"Add task\"]})}),/*#__PURE__*/_jsx(ModalTask,{toggleModal:toggleModal,setToggleModal:setToggleModal})]}),/*#__PURE__*/_jsx(Footer,{})]});}else return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(ToDoListStyle,{children:[/*#__PURE__*/_jsxs(Button,{children:[\" \",/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){return setToggleModal(!toggleModal);},children:\" Add task\"})]}),/*#__PURE__*/_jsx(ModalTask,{toggleModal:toggleModal,setToggleModal:setToggleModal})]}),/*#__PURE__*/_jsx(Footer,{})]});}","map":{"version":3,"names":["axios","useEffect","useState","useContext","Button","ToDoListStyle","Footer","Header","UserContext","dayjs","ModalTask","ModalDelete","ToDoList","toggleModal","setToggleModal","tasks","setTasks","del","setDel","idTask","setIdtask","user","setUSer","marked","setMarked","token","localStorage","getItem","URL_DELETE_TASK","REACT_APP_API_URL","config","headers","Authorization","console","log","URL","get","then","response","data","catch","e","riskTask","index","taskid","URL_PATCH","body","isDone","done","patch","length","locale","format","map","task","id","description"],"sources":["/home/juliana/Documentos/Driven/Projetos/Projeto-autoral/Pets-planner-front/src/components/ToDoList.js"],"sourcesContent":["import axios from \"axios\";\nimport { useEffect, useState, useContext } from \"react\";\nimport Button from \"../styledComponents/SubmmitButton\";\nimport ToDoListStyle from \"../styledComponents/ToDoListStyle\";\nimport Footer from \"./Footer\";\nimport Header from \"./Header\";\nimport UserContext from \"../Context/UserContext\";\nimport dayjs from \"dayjs\";\nimport \"dayjs/locale/pt-br\";\nimport ModalTask from \"./ModalTask\";\nimport ModalDelete from \"./ModalDelete\";\n\nexport default function ToDoList() {\n  const [toggleModal, setToggleModal] = useState(false);\n  const [tasks, setTasks] = useState([]);\n  const [del, setDel] = useState(false);\n  const [idTask,setIdtask] = useState()\n  const { user, setUSer } = useContext(UserContext);\n  const [marked, setMarked] = useState(false);\n \n  const token = localStorage.getItem(\"token\");\n  const URL_DELETE_TASK = `${REACT_APP_API_URL}/pet/task/delete/${idTask}`;\n\n  const config = {\n    headers: {\n      Authorization: `Bearer ${token}`,\n    },\n  };\n  console.log(\"token \", token);\n  const URL = \"http://localhost:4000/pet/task\";\n\n  useEffect(() => {\n    axios\n      .get(URL, config)\n      .then((response) => {\n        console.log(response.data);\n        setTasks(response.data);\n      })\n      .catch((e) => {\n        console.log(e.response);\n      });\n  }, [toggleModal, del, marked]);\n\n  function riskTask(index, taskid) {\n    const URL_PATCH = `http://localhost:4000/pet/task/patch/${taskid}`;\n    const body = {\n      isDone: tasks[index].done,\n    };\n    console.log(body);\n\n    axios\n      .patch(URL_PATCH, body, config)\n      .then((response) => {\n        console.log(response.data);\n        setMarked(!marked);\n      })\n      .catch((e) => console.log(e.response));\n  }\n\n  if (tasks.length > 0) {\n    return (\n      <>\n        <Header />\n        <ToDoListStyle>\n          <h1> {dayjs().locale(\"PT-BR\").format(\"dddd, DD/MM\")} </h1>\n          {tasks.map((task, index) => {\n            return task.done ? (\n              <div className=\"single-task\">\n                <p\n                  onClick={() =>{ riskTask(index, task.id) \n                 } }\n                  className=\"underline\"\n                >\n                  {task.description}\n                </p>\n                <span onClick={() => {\n                  setDel(!del)\n                setIdtask(task.id) \n                 console.log(\"id do list \",task.id)}}>\n                  <ion-icon name=\"trash-outline\"></ion-icon>\n                </span>\n                <ModalDelete\n                  toggleModal={del}\n                  setToggleModal={setDel}\n                  id={idTask}\n                  URL = {URL_DELETE_TASK}\n                />\n              </div>\n            ) : (\n              <div className=\"single-task\">\n                <p onClick={() => riskTask(index, task.id)}>\n                  {\" \"}\n                  {task.description}{\" \"}\n                </p>\n                <span onClick={() => {setDel(!del)\n                 setIdtask(task.id)}}>\n                  <ion-icon name=\"trash-outline\"></ion-icon>\n                </span>\n                <ModalDelete\n                  toggleModal={del}\n                  setToggleModal={setDel}\n                  id={idTask}\n                  URL={URL_DELETE_TASK}\n                />\n              </div>\n            );\n          })}\n          <Button>\n            <span\n              onClick={() => {\n                setToggleModal(!toggleModal);\n              }}\n            >\n              {\" \"}\n              Add task\n            </span>\n          </Button>\n          <ModalTask\n            toggleModal={toggleModal}\n            setToggleModal={setToggleModal}\n          />\n        </ToDoListStyle>\n        <Footer />\n      </>\n    );\n  } else\n    return (\n      <>\n        <Header />\n        <ToDoListStyle>\n          <Button>\n            {\" \"}\n            <p onClick={() => setToggleModal(!toggleModal)}> Add task</p>\n          </Button>\n          <ModalTask\n            toggleModal={toggleModal}\n            setToggleModal={setToggleModal}\n          />\n        </ToDoListStyle>\n        <Footer />\n      </>\n    );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}